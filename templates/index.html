{% extends "base.html" %}

{% block content %}

<div class="d-flex align-items-center gap-2 mb-3">
  <h4 class="mb-0">Dashboard</h4>
  <span class="badge network-badge-{{ network }} text-uppercase">{{ network_name }}</span>
</div>

{% if not public_key %}
  <!-- No wallet yet -->
  <div class="card">
    <div class="card-body text-center py-5">
      <h5 class="card-title">No wallet found</h5>
      <p class="text-muted mb-4">Create a wallet to get started on {{ network_name }}.</p>
      <a href="/create" class="btn btn-primary">Create Wallet</a>
    </div>
  </div>

{% else %}
  <!-- Public key card -->
  <div class="card mb-3">
    <div class="card-header text-muted small">Public Key (Address)</div>
    <div class="card-body d-flex align-items-start gap-3">
      <code class="hash flex-grow-1 mb-0">{{ public_key }}</code>
      <button class="btn btn-sm btn-outline-secondary text-nowrap"
              onclick="navigator.clipboard.writeText('{{ public_key }}'); this.textContent='Copied!';"
              style="flex-shrink: 0;">
        Copy
      </button>
    </div>
  </div>

  <!-- Balances card -->
  <div class="card mb-3">
    <div class="card-header text-muted small d-flex justify-content-between align-items-center">
      <span>Balances</span>
      <a href="/assets" class="text-decoration-none small">Manage Assets</a>
    </div>
    <div class="card-body">
      {% if not_funded %}
        <p class="text-muted mb-2">
          This account hasn't been activated on {{ network_name }} yet.
          {% if network == 'testnet' %}
            Fund it with Friendbot to get started.
          {% else %}
            Send at least 1 XLM to the address above to activate it.
          {% endif %}
        </p>
        {% if network == 'testnet' %}
          <form method="post" action="/fund">
            <button type="submit" class="btn btn-warning btn-sm">Fund with Friendbot</button>
          </form>
        {% endif %}
      {% elif error %}
        <div class="text-danger small">{{ error }}</div>
      {% elif not balances %}
        <span class="text-muted">â€”</span>
      {% else %}
        <table class="table table-sm mb-0">
          <thead>
            <tr>
              <th class="text-muted fw-normal small">Asset</th>
              <th class="text-muted fw-normal small text-end">Balance</th>
            </tr>
          </thead>
          <tbody>
            {% for b in balances %}
            <tr>
              <td class="fw-semibold">{{ b.asset }}</td>
              <td class="text-end font-monospace">{{ b.balance }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      {% endif %}
    </div>
  </div>

  <!-- Quick actions -->
  <div class="d-flex gap-2">
    <a href="/send" class="btn btn-primary">Send</a>
    <a href="/assets" class="btn btn-outline-secondary">Manage Assets</a>
    <a href="/history" class="btn btn-outline-secondary">Transaction History</a>
  </div>

{% endif %}

{% endblock %}
